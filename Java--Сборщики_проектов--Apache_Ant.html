<!doctype html><html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Apache Ant</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles3.css" type="text/css" />
  
    <script type="text/javascript">
        function in_frame () { try { return window.self !== window.top; } catch (e) { return true; } }
        if (!in_frame()) {
            var page = location.pathname.substring(location.pathname.lastIndexOf("/") + 1);
            window.location = 'index.html#' + page;
        }
    </script>
</head>
<body><div class="page"><h1 class="title">Apache Ant</h1><br/><br />Apache Ant™ 1.10.12 Manual: C:/Java/apache-ant-1.10.12/manual/index.html<br /><br />В Windows переменную окружения Path прописываем дополнительно путь к директории “bin” с программой Ant.<br />В папке проекта создаем директорию “ant”. Помещаем в нее файл “build.xml”:<br /><br />==== build.xml ====<br /><span style="color:#e8bf6a;">&lt;?</span><span style="color:#bababa;">xml version</span><span style="color:#6a8759;">="1.0" </span><span style="color:#bababa;">encoding</span><span style="color:#6a8759;">="UTF-8" </span>?&gt;<br /><span style="color:#808080;">&lt;!-- Комментарий --&gt;</span><br />&lt;project <span style="color:#bababa;">name</span><span style="color:#6a8759;">="AssemblingWithAnt" </span><span style="color:#bababa;">default</span><span style="color:#6a8759;">="all"</span>&gt;<br />    &lt;target <span style="color:#bababa;">name</span><span style="color:#6a8759;">="make.dirs" </span><span style="color:#bababa;">description</span><span style="color:#6a8759;">="Make some dirs"</span>&gt;<br />        &lt;mkdir <span style="color:#bababa;">dir</span><span style="color:#6a8759;">="build"</span>/&gt;<br />        &lt;mkdir <span style="color:#bababa;">dir</span><span style="color:#6a8759;">="build/class"</span>/&gt;<br />    &lt;/target&gt;<br />    &lt;target <span style="color:#bababa;">name</span><span style="color:#6a8759;">="compile" </span><span style="color:#bababa;">description</span><span style="color:#6a8759;">="compile java" </span><span style="color:#bababa;">depends</span><span style="color:#6a8759;">="make.dirs"</span>&gt;<br />        &lt;javac <span style="color:#bababa;">destdir</span><span style="color:#6a8759;">="build/class"</span>&gt;<br />            &lt;src <span style="color:#bababa;">path</span><span style="color:#6a8759;">="../src"</span>/&gt;<br />        &lt;/javac&gt;<br />    &lt;/target&gt;<br />    &lt;target <span style="color:#bababa;">name</span><span style="color:#6a8759;">="make.jar" </span><span style="color:#bababa;">description</span><span style="color:#6a8759;">="make jar file" </span><span style="color:#bababa;">depends</span><span style="color:#6a8759;">="compile"</span>&gt;<br />        &lt;jar <span style="color:#bababa;">destfile</span><span style="color:#6a8759;">="build/make.jar"</span>&gt;<br />            &lt;fileset <span style="color:#bababa;">dir</span><span style="color:#6a8759;">="build/class"</span>&gt;<br />                &lt;include <span style="color:#bababa;">name</span><span style="color:#6a8759;">="**/*.class"</span>/&gt;<br />                &lt;exclude <span style="color:#bababa;">name</span><span style="color:#6a8759;">="**/CVS"</span>/&gt;<br />            &lt;/fileset&gt;<br />            &lt;manifest&gt;<span style="color:#e8bf6a;"><br />    </span>            &lt;attribute<span style="color:#e8bf6a;"> </span><span style="color:#bababa;">name</span><span style="color:#6a8759;">="Main-class" </span><span style="color:#bababa;">value</span><span style="color:#6a8759;">="HelloProgram"</span>/&gt;<br />            &lt;/manifest&gt;<br />        &lt;/jar&gt;<br />    &lt;/target&gt;<br />    &lt;target <span style="color:#bababa;">name</span><span style="color:#6a8759;">="all" </span><span style="color:#bababa;">description</span><span style="color:#6a8759;">="Build" </span><span style="color:#bababa;">depends</span><span style="color:#6a8759;">="make.jar"</span>&gt;<br />        &lt;echo&gt;I'm Building&lt;/echo&gt;<br />    &lt;/target&gt;<br />    &lt;target <span style="color:#bababa;">name</span><span style="color:#6a8759;">="run"</span>&gt;<br />        &lt;java <span style="color:#bababa;">classname</span><span style="color:#6a8759;">="MainProjectAssembling" </span><span style="color:#bababa;">classpath</span><span style="color:#6a8759;">="build/class"</span>/&gt;<br />    &lt;/target&gt;<br />    &lt;target <span style="color:#bababa;">name</span><span style="color:#6a8759;">="clean" </span><span style="color:#bababa;">description</span><span style="color:#6a8759;">="Clean up"</span>&gt;<br />        &lt;echo&gt;I'm cleaning&lt;/echo&gt;<br />        &lt;delete <span style="color:#bababa;">dir</span><span style="color:#6a8759;">="build"</span>/&gt;<br />    &lt;/target&gt;<br />&lt;/project&gt;<br />========================<br /><br /><br />Из командной строки в папке “ant” запускаем:<br />ant clean // очистка<br />ant // выполняется задача по умолчанию <span style="color:#bababa;">default</span><span style="color:#6a8759;">="all"</span> с зависимостями (<span style="color:#bababa;">depends</span>): <span style="color:#6a8759;">"make.dirs"</span>, <span style="color:#6a8759;">"compile"</span>, <span style="color:#6a8759;">"make.jar"</span>, <span style="color:#6a8759;">"all"</span><br />ant run // запускается программа “MainProjectAssembling”<br />ant clean run<br /><br />--------------------------------------------------------------------------------------------<br /><br />==== build.xml ====<br />&lt;project name="java-build-tools" &gt;      - имя проекта<br />    &lt;property name="src.dir" value="src"/&gt;      <br />    &lt;property name="build.dir" value="build"/&gt;      - сюда билдится проект<br />    &lt;property name="classes.dir" value="${build.dir}/classes"/&gt;     - сюда классы билдятся<br />    &lt;property name="jar.dir" value="${build.dir}/jar"/&gt;     - сюда заливается jar<br />    &lt;property name="jar.file" value="${jar.dir}/${ant.project.name}.jar"/&gt;      - файлы с jar<br />    &lt;property name="lib.dir" value="lib" /&gt;     - папка, где хранятся библиотеки, т.к. Ant не умеет подтягивать по умолчанию библиотеки<br />    &lt;property name="main-class" value="JavaHelloWorld"/&gt;        - чтобы генерировать запускаемый jar<br /><br />    &lt;path id="lib.path.id"&gt;<br />        &lt;fileset dir="${lib.dir}" /&gt;<br />    &lt;/path&gt;<br /><br />    &lt;target name="clean"&gt;<br />        &lt;delete dir="${build.dir}"/&gt;<br />    &lt;/target&gt;<br /><br />    &lt;target name="compile"&gt;<br />        &lt;mkdir dir="${classes.dir}"/&gt;<br />        &lt;javac srcdir="${src.dir}" destdir="${classes.dir}" classpathref="lib.path.id"/&gt;        - srcdir - откуда брать<br />    &lt;/target&gt;<br /><br />    &lt;target name="package" depends="compile"&gt;<br />        &lt;mkdir dir="${jar.dir}"/&gt;<br />        &lt;jar destfile="${jar.file}" basedir="${classes.dir}"&gt;       - создание jar файла<br />            &lt;manifest&gt;<br />                &lt;attribute name="Main-Class" value="${main-class}"/&gt;<br />            &lt;/manifest&gt;<br />        &lt;/jar&gt;<br />    &lt;/target&gt;<br />&lt;/project&gt;<br />========================<br /><br /><br /><br /><br /><br /><br />       </div></body></html>