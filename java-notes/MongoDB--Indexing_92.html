<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Indexing</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles4.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>Indexing</h1><br/><p></p><p>Индексация</p><p></p><p>Индексация поддерживает эффективное выполнение запросов. </p><p>Без индексов, MongoDB необходимо сканировать каждый документ коллекции для выбора тех документов, которые соответствуют запросу. Данный процесс крайне не эффективен и требует обработки большого количества данных.</p><p>Индексы – это специальные структуры данных, которые хранят небольшие части данных в форме, которая легко распознаётся. Они хранят значение определённого поля или набора полей, упорядоченных по значению поля, указанному в индексе.</p><p></p><p>Метод ensureIndex() используется для создания индекса.</p><p><code></code></p><p><code></code><strong>db.ИМЯ_КОЛЛЕКЦИИ.ensureIndex( {KEY: 1} )</strong><code></code></p><p><code></code></p><p>- имя коллекции, для которой мы хотим создать индекс</p><p>- число ‘1’ – порядок по возрастанию. Для сортировки по убыванию используется число – ‘-1’</p><p></p><p>Пример:</p><p>Создать индекс по имени (title) для данной коллекции:</p><p><code></code></p><p><code></code><strong>db.developers.ensureIndex( {&quot;title&quot;: 1} )</strong></p><p><code></code></p><p><code></code>{</p><p>	&quot;createdCollectionAutomatically&quot; : false,</p><p>	&quot;numIndexesBefore&quot; : 1,</p><p>	&quot;numIndexesAfter&quot; : 2,</p><p>	&quot;ok&quot; : 1</p><p>}<code></code></p><p><code></code></p><p>Мы также можем передать несколько полей для индексации:</p><p><code></code></p><p><code></code><strong>db.developers.ensureIndex( {&quot;title&quot;: 1, &quot;specialty&quot;: -1} )</strong></p><p><code></code></p><p><code></code>{</p><p>	&quot;createdCollectionAutomatically&quot; : false,</p><p>	&quot;numIndexesBefore&quot; : 2,</p><p>	&quot;numIndexesAfter&quot; : 3,</p><p>	&quot;ok&quot; : 1</p><p>}</p><p></p><p>Данный метод также может принимать список параметров:</p><p></p><p><table class="table"><tr><th>Параметр</th><th>Тип</th><th>Описание</th></tr><tr><td>background</td><td>Boolean</td><td>Создаёт индекс в фоновом режиме таким образом, что данный индекс не блокирует другие процессы базы данных (далее – БД). Для активации необходимо установить true. По умолчанию – false.</td></tr><tr><td>unique</td><td>Boolean</td><td>Создаёт уникальный индекс таким образом, что коллекция не примет вставку документа, в котором ключ индекса, или ключи совпадают с уже существующими значениями. Для активации необходимо установить true. По умолчанию – false.</td></tr><tr><td>name</td><td>string</td><td>Имя индекса. Если не указан, то MongoDB генерирует путём конкантенации имён индексируемых полей.</td></tr><tr><td>dropDups</td><td>Boolean</td><td>Создаёт уникальный индекс для поля, которое может иметь дубликаты. MongoDB индексирует только первый случай ключа и удаляет все документы коллекции, которые содержат совпадения поля. Для активации необходимо установить true. По умолчанию – false.</td></tr><tr><td>sparse</td><td>Boolean</td><td>Индекс ссылается на документ по указанному полю. Данный вид индексов используют меньше памяти. Но, в некоторых ситуациях, ведут себя по-другому. Для активации необходимо установить true. По умолчанию – false.</td></tr><tr><td>expireAfterSeconds</td><td>integer</td><td>Определяет значение (в секундах) TTL для контроля того, как долго MongoDB сохраняет документ в коллекции.</td></tr><tr><td>v</td><td>index version</td><td>Номер версии индекса. По умолчанию, версия индекса зависит от версии MongoDB во время создания индекса.</td></tr><tr><td>weights</td><td>document</td><td>Число, которое ранжирует от 1 до 99,999 и обозначает важность соответствующего поля по отношению к другим индексируемым полям.</td></tr><tr><td>default_language</td><td>string</td><td>Для текстового индекса это язык, который определяет список стоп-слов и правил для сущностей stemmer и tokenizer. По умолчанию – english</td></tr><tr><td>language_override</td><td>string</td><td>Для текстового индекса определяет имя поля в документе, которое содержит, и переопределяет язык по умолчанию.</td></tr></table></p><p></p><p></p><p></p></div>
</body>
</html>
