<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Tomcat</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles4.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>Tomcat</h1><br/><p></p><p>Tomcat - контейнер сервлетов - программа на java, которая использует технологию сервлетов для работы с веб, для приема сообщений от пользователя.</p><p>Сервлет - конечная точка, где пользователю отдается какой-то ресурс (ендпоинт)</p><p>Фильтр - перехватывает все запросы</p><p>Tomcat работает только с .war файлами</p><p>Apache TomEE - расширенный Tomcat = Tomcat Enterprise (скачать <a href="https://dlcdn.apache.org/tomee/tomee-9.0.0-M8/apache-tomee-9.0.0-M8-plume.zip">https://dlcdn.apache.org/tomee/tomee-9.0.0-M8/apache-tomee-9.0.0-M8-plume.zip</a>)</p><p></p><p>Скачать Tomcat: <a href="https://tomcat.apache.org/download-10.cgi">https://tomcat.apache.org/download-10.cgi</a></p><p>- <a href="https://dlcdn.apache.org/tomcat/tomcat-10/v10.0.23/bin/apache-tomcat-10.0.23.zip">zip</a> (<a href="https://downloads.apache.org/tomcat/tomcat-10/v10.0.23/bin/apache-tomcat-10.0.23.zip.asc">pgp</a>, <a href="https://downloads.apache.org/tomcat/tomcat-10/v10.0.23/bin/apache-tomcat-10.0.23.zip.sha512">sha512</a>)</p><p>- распаковать (появится папка apache-tomcat-10.0.23):</p><p>   → bin/startup.bat - запуск</p><p>   → bin/shutdown.bat - остановить Tomcat (либо Ctrl + C в консоли с работающим Tomcat)</p><p>   → webapps - сюда помещается Lesson07-web-xml-1.0-SNAPSHOT.war файл, который нужно запустить (в .war файле по сравнению с .jar еще находится веб контент). При работающем Tomcat после копирования Lesson07-web-xml-1.0-SNAPSHOT.war, автоматически .war распаковывается в папку с таким же названием и запускается</p><p>   → conf/server.xml - настроить порт (8080 - по умолчанию)</p><p>   → наше приложение откроется в браузере по адресу: localhost:8080/Lesson07-web-xml-1.0-SNAPSHOT</p><p>   → приложение, помещенное в папку webapps\ROOT, откроется по адресу localhost:8080</p><p>   → webapps\examples - примеры</p><p>   → webapps\docs - документация на Tomcat</p><p>   → webapps\manager - админка</p><p>   → host-manager - UI чтобы руками деплоить файлы .war (если нет доступа к webapps, делаем доступ по логину и паролю к host-manager, и через веб-UI можно деплоить приложение)</p><p>В Tomcat можно развернуть почти безграничное число приложений, которые будут работать на одном порту, можно наладить коммуникацию</p><p>Файл pom.xml при использовании Tomcat:</p><p><div class="codebox"><pre>&lt;?xml <span style="color:#333333;font-weight:400">version=</span><span style="color:#3ad900;font-weight:400">&quot;1.0&quot;</span> <span style="color:#333333;font-weight:400">encoding=</span><span style="color:#3ad900;font-weight:400">&quot;UTF-8&quot;</span>?&gt;<br />&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;<br />         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;<br />    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;<br /><br />    &lt;parent&gt;<br />        &lt;groupId&gt;hillel.course.javaee20220604&lt;/groupId&gt;<br />        &lt;artifactId&gt;Lesson-07&lt;/artifactId&gt;<br />        &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;<br />    &lt;/parent&gt;<br /><br />    &lt;artifactId&gt;Lesson07-web-xml&lt;/artifactId&gt;<br />    &lt;packaging&gt;war&lt;/packaging&gt;<br /><br />    &lt;dependencies&gt;<br /><br />        <span style="color:#0088ff;font-weight:400">&lt;!-- Tomcat version &gt;= 10 (jakarta) --&gt;</span><br />        &lt;dependency&gt;<br />            &lt;groupId&gt;jakarta.servlet&lt;/groupId&gt;<br />            &lt;artifactId&gt;jakarta.servlet-api&lt;/artifactId&gt;<br />            &lt;version&gt;5.0.0&lt;/version&gt;<br />            &lt;scope&gt;provided&lt;/scope&gt;<br />        &lt;/dependency&gt;<br /><br />        &lt;dependency&gt;<br />            &lt;groupId&gt;jakarta.servlet.jsp&lt;/groupId&gt;<br />            &lt;artifactId&gt;jakarta.servlet.jsp-api&lt;/artifactId&gt;<br />            &lt;version&gt;3.0.0&lt;/version&gt;<br />            &lt;scope&gt;provided&lt;/scope&gt;<br />        &lt;/dependency&gt;<br /><br />        <span style="color:#0088ff;font-weight:400">&lt;!-- Tomcat version &lt;= 9 (javax) --&gt;</span><br />        <span style="color:#0088ff;font-weight:400">&lt;!--        &lt;dependency&gt;--&gt;</span><br />        <span style="color:#0088ff;font-weight:400">&lt;!--            &lt;groupId&gt;javax.servlet&lt;/groupId&gt;--&gt;</span><br />        <span style="color:#0088ff;font-weight:400">&lt;!--            &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;--&gt;</span><br />        <span style="color:#0088ff;font-weight:400">&lt;!--            &lt;version&gt;4.0.1&lt;/version&gt;--&gt;</span><br />        <span style="color:#0088ff;font-weight:400">&lt;!--            &lt;scope&gt;provided&lt;/scope&gt;--&gt;</span><br />        <span style="color:#0088ff;font-weight:400">&lt;!--        &lt;/dependency&gt;--&gt;</span><br />        <span style="color:#0088ff;font-weight:400">&lt;!--        &lt;dependency&gt;--&gt;</span><br />        <span style="color:#0088ff;font-weight:400">&lt;!--            &lt;groupId&gt;javax.servlet&lt;/groupId&gt;--&gt;</span><br />        <span style="color:#0088ff;font-weight:400">&lt;!--            &lt;artifactId&gt;jsp-api&lt;/artifactId&gt;--&gt;</span><br />        <span style="color:#0088ff;font-weight:400">&lt;!--            &lt;version&gt;2.0&lt;/version&gt;--&gt;</span><br />        <span style="color:#0088ff;font-weight:400">&lt;!--            &lt;scope&gt;provided&lt;/scope&gt;--&gt;</span><br />        <span style="color:#0088ff;font-weight:400">&lt;!--        &lt;/dependency&gt;--&gt;</span><br />    &lt;/dependencies&gt;<br />&lt;/project&gt;<br /></pre></div></p><p></p><p>Можно настроить пользователей в Tomcat:</p><p><a href="file://C:/Java/apache-tomcat-10.0.23/conf/tomcat-users.xml">\apache-tomcat-10.0.23\conf\tomcat-users.xml</a></p><p><div class="codebox"><pre>  ................  <br />  &lt;user username=&quot;admin&quot; password=&quot;&lt;must-be-changed&gt;&quot; roles=&quot;manager-gui&quot;/&gt;<br />  &lt;user username=&quot;robot&quot; password=&quot;&lt;must-be-changed&gt;&quot; roles=&quot;manager-script&quot;/&gt;<br /><br />  &lt;role rolename=&quot;tomcat&quot;/&gt;<br />  &lt;role rolename=&quot;role1&quot;/&gt;<br />  &lt;user username=&quot;tomcat&quot; password=&quot;&lt;must-be-changed&gt;&quot; roles=&quot;tomcat&quot;/&gt;<br />  &lt;user username=&quot;both&quot; password=&quot;&lt;must-be-changed&gt;&quot; roles=&quot;tomcat,role1&quot;/&gt;<br />  &lt;user username=&quot;role1&quot; password=&quot;&lt;must-be-changed&gt;&quot; roles=&quot;role1&quot;/&gt;<br />  ..........</pre></div></p><p></p><p>Есть еще контейнер сервлетов Jetty</p><p></p></div>
</body>
</html>
