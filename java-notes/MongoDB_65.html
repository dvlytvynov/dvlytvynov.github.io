<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>MongoDB</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles4.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>MongoDB</h1><br/><p></p><p>MongoDB - NoSQL база данных (нереляционная база данных)</p><p></p><p><a href="https://www.mongodb.com/">https://www.mongodb.com/</a> - Официальный сайт</p><p></p><p>• База данных состоит из коллекций</p><p>• Каждая коллекция имеет свое уникальное имя</p><p>• Коллекция состоит из документов, например:</p><p>            {</p><p>               _id: ObjectId(7bf78ad8902c)</p><p>               title: &#39;MongoDB&#39;, </p><p>               description: &#39;Simple MongoDB Database&#39;,</p><p>               by: &#39;proselyte&#39;,</p><p>               url: &#39;proselyte.net&#39;,</p><p>               tags: [&#39;proselyte tutorials&#39;, &#39;NoSQL&#39;, &#39;MongoDB&#39;], </p><p>               developers: [	</p><p>                  {</p><p>                     developer:&#39;developer1&#39;,</p><p>                     specialty: &#39;Java Developer&#39;</p><p>                  },</p><p>                  {</p><p>                     developer: &#39;developer2&#39;</p><p>                     specialty: &#39;C++ Developer&#39;</p><p>                     }</p><p>               ]</p><p>            }</p><p></p><p>Типы данных:</p><p>• <strong>String</strong> - используется для хранения символьных строк. В MongoDB используется кодировка UTF-8.</p><p>• <strong>Arrays</strong> - используется для хранения массивов значений по одному ключу.</p><p>• <strong>Binary data</strong> - позволяет хранить бинарные данные.</p><p>• <strong>Boolean</strong> - используется для хранения логических (true / false) значений.</p><p>• <strong>Date</strong> - используется для хранения текущей даты или времени в UNIX формате.</p><p>• <strong>Double</strong> - используется для хранения значений с плавающей точкой</p><p>• <strong>Integer</strong> - используется для хранения целочисленных значений. В зависимости от сервера может быть как 32-битным, так и 64-битным.</p><p>• <strong>Code</strong> (<strong>JavaScript</strong>) - Используется для хранения JavaScript кода в документе.</p><p>• <strong>Min key/ Max key</strong> - используется для сравнения значений с наибольшим и наименьшим BSON (Binary JSON) элементом.</p><p>• <strong>Null</strong> - используется для хранения значения Null.</p><p>• <strong>Object</strong> - строковый тип данных; используется для встроенных документов.</p><p>• <strong>Object ID</strong> - используется для хранения ID документа.</p><p>• <strong>Regular Expression</strong> - используется для хранения  регулярных выражений.</p><p>• <strong>Symbol</strong> - используется также, как и String, но, обычно, резервируется для языков, которые используют специальные символы.</p><p>• <strong>Timestamp</strong> - используется для хранения даты и времени</p><p></p><p>Идентификатор документа (состоит из 12 байт):</p><p><img src="images/65-1.png" alt="images/65-1.png" /></p><p>1...9 - гарантируют уникальность среди других машин</p><p></p><p>Установка:</p><p>1. <a href="https://www.mongodb.com/try/download/community">https://www.mongodb.com/try/download/community</a> - Скачать MongoDB Community Server</p><p>2. <a href="https://www.mongodb.com/try/download/compass">https://www.mongodb.com/try/download/compass</a> - Скачать MongoDB Compass</p><p>3. Установить Compass, Community Server</p><p>4. Создать папку для хранения баз данных <strong>C:\data\db</strong></p><p></p><p>Запуск:</p><p>1. Запустить командную строку в папке <strong>C:\Program Files\MongoDB\Server\3.6\bin</strong></p><p>2. Запустить сервер комндой <strong>mongod.exe</strong> (порт по умолчанию 27017)</p><p>3. Если есть необходимость использовать другой путь к файлам (отличный от <strong>C:\data\db</strong>), его можно передать при запуске MongoDB:</p><p>   ◇ <strong>mongod.exe --dbpath d:\test\mongodb\data</strong></p><p>4. Запусить еще одно окно командной строки и запусить оболочку MongoDB shell командой <strong>mongo.exe</strong></p><p>   ◇ <strong>use test</strong> - устанавливает к качестве используемой базы данных “test” (если базы нет, то будет создана автоматически); db бдет представлять текущую базу данных “test”</p><p>   ◇ <strong>db.users.save({name: “John”})</strong> - создаем коллекцию “users”; с помощью метода save() добавляем объект {name: “John”} в коллекцию “users”. В сообщении WriteResult({ &quot;nInserted&quot; : 1 }) - 1(кол-во выполненных записей)</p><p>   ◇ <strong>db.users.find()</strong> - вывод на экран всех объектов коллекции “users” в базе данных “test” (_id - первичный ключ для каждого документа, также доступен через id)</p><p>   ◇ <strong>show dbs</strong> - вывести все имеющиеся базы данных</p><p>   ◇ <strong>db</strong> - вывести использующуюся в данный момент базу</p><p>   ◇ <strong>show collections</strong> - вывести все коллекции в текущей базе данных</p><p>   ◇ <strong>db.stats()</strong> - статистика по текущей базе данных (размеры указаны в байтах)</p><p>   ◇ <strong>db.users.stats()</strong> - статистика по коллекции users</p><p>   ◇ <strong>db.dropDatabase()</strong> - удалить текущую базу данных</p><p>   ◇ <strong>db.help()</strong> - перечень команд</p><p></p><p>Базовые функции при работе с базами данных:</p><p><img src="images/65-2.png" alt="images/65-2.png" /></p><p></p><p><a href="MongoDB--Create_Collection_84.html">Создание коллекции</a>:</p><p><strong>db.createCollection(имя_коллекции, свойства_коллекции)</strong></p><p></p><p>Добавления в коллекцию (при вставке документа коллекция создается автоматически):</p><p><img src="images/65-3.png" alt="images/65-3.png" /></p><p>Метод <strong>save() </strong>работает таким же образом, как и метод <strong>insert()</strong>, в случае, если мы не указываем _id. Если же мы указываем данное поле, тогда документ перезапишет все данные документа с таким _id.</p><p>Метод <strong>findOne()</strong> возвращает только один документ.</p><p><strong>db.users.insertOne({name: “Tom”, age: 32, languages: [&quot;english&quot;, “spanish”]}) </strong>(пробелы можно опускать)</p><p><strong>db.users.insertMany([{name:&quot;Bob&quot;, age:26, languages:[&quot;english&quot;,&quot;french&quot;]}, {name:&quot;Alice&quot;, age:30, languages:[&quot;english&quot;,&quot;geman&quot;]}])</strong> - принимает массив</p><p><strong>db.users.insert({name: “Tom”, age: 32, languages: [&quot;english&quot;, “spanish”]})</strong> - после вызова на консоль выведется кол-во добавленных записей</p><p><strong>document=({name:&quot;Bill&quot;, age:32, languages: [&quot;english&quot;, &quot;french]})</strong> - определяем документ</p><p><strong>db.users.insert(document)</strong> - добавляем документ</p><p><strong>db.users.renameCollection(&quot;new_users&quot;)</strong> - переименование коллекции</p><p><strong>db.new_users.find()</strong> - вывод всей коллекции</p><p><strong>db.new_users.find().pretty()</strong> - вывод всей коллекции в структурированном виде с табуляцией и переводом строк</p><p><strong>db.new_users.find({name:&quot;Tom&quot;})</strong> - вывод всех документов коллекции, у которых параметр name=&quot;Tom&quot;</p><p><strong>db.new_users.find({name:&quot;Tom&quot;, age:32})</strong> - вывод всех документов коллекции с такими параметрами: name=&quot;Tom&quot;, age=32</p><p><strong>db.new_users.find({language: “english”})</strong> - вывод всех документов коллекции, у которых массив language содержит элемент “english”</p><p><strong>db.new_users.find({name: /T\w+/i})</strong> - вывод всех документов коллекции, у которых значение ключа name начинается с буквы “T”; <strong>/T\w+/i</strong> - регулярное выражение T - первая буква, \w+ - все буквы</p><p><strong>db.new_users.count()</strong> - кол-во элементов в коллекции</p><p><strong>db.new_users.find({name:&quot;Tom&quot;}).count()</strong> - кол-во элементов в коллекции, у которых параметр name=&quot;Tom&quot;</p><p><strong>db.new_users.distinct(&quot;name&quot;)</strong> - вывести уникальные значения ключа name всех элементов коллекции</p><p><strong>db.new_users.drop()</strong> - удаление коллекции</p><p></p><p><a href="MongoDB--Parameterized_Queries_85.html">Параметризированные запросы</a>:</p><p><strong>db.ИМЯ_КОЛЛЕКЦИИ.find()</strong></p><p><strong></strong></p><p><a href="MongoDB--Update_Document_87.html">Изменение документа</a>:<code></code></p><p><code></code><strong>db.ИМЯ_КОЛЛЕКЦИИ.update(КРИТЕРИЙ_ВЫБОРА, ИЗМЕНЁННЫЕ_ДАННЫЕ)</strong></p><p></p><p><a href="MongoDB--Remove_Document_88.html">Удаление документа</a>:</p><p><strong>db.ИМЯ_КОЛЛЕКЦИИ.remove(КРИТЕРИЙ_УДАЛЕНИЯ)</strong></p><p></p><p><a href="MongoDB--Projection_89.html">Projection (проекция)</a> - необходимые данные документа коллекции.</p><p><strong>db.ИМЯ_КОЛЛЕКЦИИ.find( {}, {АТТРИБУТ: 1} )</strong></p><p></p><p><a href="MongoDB--Limit_Documents_90.html">Ограничение количества документов</a>, получаемых из коллекции:</p><p><strong>db.ИМЯ_КОЛЛЕКЦИИ.find().limit(КОЛИЧЕСТВО_ДОУМЕНТОВ).skip(КОЛИЧЕСТВО_ДОКУМЕНТОВ)</strong></p><p></p><p><a href="MongoDB--Sort_Documents_91.html">Сортировка документов</a>:</p><p><strong>db.ИМЯ_КОЛЛЕКЦИИ.find().sort( {АТРИБУТ: 1} )</strong></p><p></p><p><a href="MongoDB--Indexing_92.html">Индексация</a>:</p><p><strong>db.ИМЯ_КОЛЛЕКЦИИ.ensureIndex( {KEY: 1} )</strong></p><p></p><p><a href="MongoDB--Aggregation_93.html">Агрегация</a>:</p><p><strong>db.ИМЯ_КОЛЛЕКЦИИ.aggregate(ОПЕРАЦИЯ_АГРЕГАЦИИ)</strong></p><p></p></div>
</body>
</html>
