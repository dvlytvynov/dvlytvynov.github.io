<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Trigger</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles4.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>Trigger</h1><br/><p></p><p><h3>A trigger in MySQL is a set of SQL statements that reside in a system catalog. </h3></p><p><strong>It is a special type of stored procedure that is invoked automatically in response to an event</strong><h3>. </h3></p><p><h3>Each trigger is associated with a table, which is activated on any DML statement such as </h3><strong>INSERT, UPDATE</strong><h3>, or </h3><strong>DELETE</strong><h3>.</h3></p><p></p><p></p><p><strong><span style="color:#006699;">CREATE</span></strong> <strong><span style="color:#006699;">TRIGGER</span></strong> trigger_name  trigger_time trigger_event  </p><p><strong><span style="color:#006699;">ON</span></strong> table_name <strong><span style="color:#006699;">FOR</span></strong> EACH ROW  </p><p><strong><span style="color:#006699;">BEGIN</span></strong>  </p><p>    <span style="color:#008200;">--variable declarations</span>  </p><p>    <span style="color:#008200;">--trigger code</span>  </p><p><strong><span style="color:#006699;">END</span></strong>;    </p><p></p><p></p><p><strong><span style="color:#006699;">CREATE</span></strong> <strong><span style="color:#006699;">TRIGGER</span></strong> trigger_name    </p><p>    (<strong><span style="color:#006699;">AFTER</span></strong> | BEFORE) (<strong><span style="color:#006699;">INSERT</span></strong> | <strong><span style="color:#006699;">UPDATE</span></strong> | <strong><span style="color:#006699;">DELETE</span></strong>)  </p><p>         <strong><span style="color:#006699;">ON</span></strong> table_name <strong><span style="color:#006699;">FOR</span></strong> EACH ROW    </p><p>         <strong><span style="color:#006699;">BEGIN</span></strong>    </p><p>        <span style="color:#008200;">--variable declarations  </span>  </p><p>        <span style="color:#008200;">--trigger code  </span>  </p><p>        <strong><span style="color:#006699;">END</span></strong>;     </p><p></p><p></p><p>T<h3>he availability of OLD and NEW modifiers with the below table:</h3></p><p><table class="table"><tr><th>Trigger Event</th><th>OLD</th><th>NEW</th></tr><tr><td>INSERT</td><td>No</td><td>Yes</td></tr><tr><td>UPDATE</td><td>Yes</td><td>Yes</td></tr><tr><td>ELETE</td><td>Yes</td><td>No</td></tr></table></p><p></p><p></p><p><h3>MySQL Trigger Example</h3></p><p></p><p>1. <h3>create a new table</h3></p><p></p><p><strong><span style="color:#006699;">CREATE</span></strong> <strong><span style="color:#006699;">TABLE</span></strong> employee(  </p><p>    <strong><span style="color:#006699;">name</span></strong> <strong><span style="color:#006699;">varchar</span></strong>(45) <span style="color:#808080;">NOT</span> <span style="color:#808080;">NULL</span>,    </p><p>    occupation <strong><span style="color:#006699;">varchar</span></strong>(35) <span style="color:#808080;">NOT</span> <span style="color:#808080;">NULL</span>,    </p><p>    working_date <strong><span style="color:#006699;">date</span></strong>,  </p><p>    working_hours <strong><span style="color:#006699;">varchar</span></strong>(10)  </p><p>);  </p><p></p><p>2. <strong>fill the records</strong><h3> into the employee table</h3></p><p></p><p><strong><span style="color:#006699;">INSERT</span></strong> <strong><span style="color:#006699;">INTO</span></strong> employee <strong><span style="color:#006699;">VALUES</span></strong>    </p><p>(<span style="color:#0000ff;">&#39;Robin&#39;</span>, <span style="color:#0000ff;">&#39;Scientist&#39;</span>, <span style="color:#0000ff;">&#39;2020-10-04&#39;</span>, 12),  </p><p>(<span style="color:#0000ff;">&#39;Warner&#39;</span>, <span style="color:#0000ff;">&#39;Engineer&#39;</span>, <span style="color:#0000ff;">&#39;2020-10-04&#39;</span>, 10),  </p><p>(<span style="color:#0000ff;">&#39;Peter&#39;</span>, <span style="color:#0000ff;">&#39;Actor&#39;</span>, <span style="color:#0000ff;">&#39;2020-10-04&#39;</span>, 13),  </p><p>(<span style="color:#0000ff;">&#39;Marco&#39;</span>, <span style="color:#0000ff;">&#39;Doctor&#39;</span>, <span style="color:#0000ff;">&#39;2020-10-04&#39;</span>, 14),  </p><p>(<span style="color:#0000ff;">&#39;Brayden&#39;</span>, <span style="color:#0000ff;">&#39;Teacher&#39;</span>, <span style="color:#0000ff;">&#39;2020-10-04&#39;</span>, 12),  </p><p>(<span style="color:#0000ff;">&#39;Antonio&#39;</span>, <span style="color:#0000ff;">&#39;Business&#39;</span>, <span style="color:#0000ff;">&#39;2020-10-04&#39;</span>, 11);  </p><p></p><p>3. <h3>Next, we will create a </h3><strong>BEFORE INSERT trigger</strong><h3>. </h3></p><p><h3>This trigger is invoked automatically insert the </h3><strong><h3>working_hours = 0</h3></strong><h3> if someone tries to insert </h3><strong><h3>working_hours &lt; 0</h3></strong><h3>.</h3></p><p></p><p>mysql&gt; DELIMITER //  </p><p>mysql&gt; <strong><span style="color:#006699;">Create</span></strong> <strong><span style="color:#006699;">Trigger</span></strong> before_insert_empworkinghours   </p><p>BEFORE <strong><span style="color:#006699;">INSERT</span></strong> <strong><span style="color:#006699;">ON</span></strong> employee <strong><span style="color:#006699;">FOR</span></strong> EACH ROW  </p><p><strong><span style="color:#006699;">BEGIN</span></strong>  </p><p>IF NEW.working_hours &lt; 0 <strong><span style="color:#006699;">THEN</span></strong> <strong><span style="color:#006699;">SET</span></strong> NEW.working_hours = 0;  </p><p><strong><span style="color:#006699;">END</span></strong> IF;  </p><p><strong><span style="color:#006699;">END</span></strong> //  </p><p></p><p>4. Check</p><p></p><p>mysql&gt; <strong><span style="color:#006699;">INSERT</span></strong> <strong><span style="color:#006699;">INTO</span></strong> employee <strong><span style="color:#006699;">VALUES</span></strong>    </p><p>(<span style="color:#0000ff;">&#39;Markus&#39;</span>, <span style="color:#0000ff;">&#39;Former&#39;</span>, <span style="color:#0000ff;">&#39;2020-10-08&#39;</span>, 14);  </p><p>  </p><p>mysql&gt; <strong><span style="color:#006699;">INSERT</span></strong> <strong><span style="color:#006699;">INTO</span></strong> employee <strong><span style="color:#006699;">VALUES</span></strong>    </p><p>(<span style="color:#0000ff;">&#39;Alexander&#39;</span>, <span style="color:#0000ff;">&#39;Actor&#39;</span>, <span style="color:#0000ff;">&#39;2020-10-012&#39;</span>, -13);  // <h3> inserting the negative values into the working_hours column of the table will automatically fill the zero value by a trigger</h3></p><p></p><p></p></div>
</body>
</html>
