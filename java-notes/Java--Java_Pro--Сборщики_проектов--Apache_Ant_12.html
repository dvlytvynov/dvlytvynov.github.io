<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Apache Ant</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles4.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>Apache Ant</h1><br/><p></p><p>Apache Ant™ 1.10.12 Manual: C:/Java/apache-ant-1.10.12/manual/index.html</p><p></p><p>В Windows переменную окружения Path прописываем дополнительно путь к директории “bin” с программой Ant.</p><p>В папке проекта создаем директорию “ant”. Помещаем в нее файл “build.xml”:</p><p></p><p>==== build.xml ====</p><p><span style="color:#e8bf6a;">&lt;?</span><span style="color:#bababa;">xml version</span><span style="color:#6a8759;">=&quot;1.0&quot; </span><span style="color:#bababa;">encoding</span><span style="color:#6a8759;">=&quot;UTF-8&quot; </span>?&gt;</p><p><span style="color:#808080;">&lt;!-- Комментарий --&gt;</span></p><p>&lt;project <span style="color:#bababa;">name</span><span style="color:#6a8759;">=&quot;AssemblingWithAnt&quot; </span><span style="color:#bababa;">default</span><span style="color:#6a8759;">=&quot;all&quot;</span>&gt;</p><p>    &lt;target <span style="color:#bababa;">name</span><span style="color:#6a8759;">=&quot;make.dirs&quot; </span><span style="color:#bababa;">description</span><span style="color:#6a8759;">=&quot;Make some dirs&quot;</span>&gt;</p><p>        &lt;mkdir <span style="color:#bababa;">dir</span><span style="color:#6a8759;">=&quot;build&quot;</span>/&gt;</p><p>        &lt;mkdir <span style="color:#bababa;">dir</span><span style="color:#6a8759;">=&quot;build/class&quot;</span>/&gt;</p><p>    &lt;/target&gt;</p><p>    &lt;target <span style="color:#bababa;">name</span><span style="color:#6a8759;">=&quot;compile&quot; </span><span style="color:#bababa;">description</span><span style="color:#6a8759;">=&quot;compile java&quot; </span><span style="color:#bababa;">depends</span><span style="color:#6a8759;">=&quot;make.dirs&quot;</span>&gt;</p><p>        &lt;javac <span style="color:#bababa;">destdir</span><span style="color:#6a8759;">=&quot;build/class&quot;</span>&gt;</p><p>            &lt;src <span style="color:#bababa;">path</span><span style="color:#6a8759;">=&quot;../src&quot;</span>/&gt;</p><p>        &lt;/javac&gt;</p><p>    &lt;/target&gt;</p><p>    &lt;target <span style="color:#bababa;">name</span><span style="color:#6a8759;">=&quot;make.jar&quot; </span><span style="color:#bababa;">description</span><span style="color:#6a8759;">=&quot;make jar file&quot; </span><span style="color:#bababa;">depends</span><span style="color:#6a8759;">=&quot;compile&quot;</span>&gt;</p><p>        &lt;jar <span style="color:#bababa;">destfile</span><span style="color:#6a8759;">=&quot;build/make.jar&quot;</span>&gt;</p><p>            &lt;fileset <span style="color:#bababa;">dir</span><span style="color:#6a8759;">=&quot;build/class&quot;</span>&gt;</p><p>                &lt;include <span style="color:#bababa;">name</span><span style="color:#6a8759;">=&quot;**/*.class&quot;</span>/&gt;</p><p>                &lt;exclude <span style="color:#bababa;">name</span><span style="color:#6a8759;">=&quot;**/CVS&quot;</span>/&gt;</p><p>            &lt;/fileset&gt;</p><p>            &lt;manifest&gt;<span style="color:#e8bf6a;"></span></p><p><span style="color:#e8bf6a;">    </span>            &lt;attribute<span style="color:#e8bf6a;"> </span><span style="color:#bababa;">name</span><span style="color:#6a8759;">=&quot;Main-class&quot; </span><span style="color:#bababa;">value</span><span style="color:#6a8759;">=&quot;HelloProgram&quot;</span>/&gt;<span style="color:#e8bf6a;"></span></p><p><span style="color:#e8bf6a;"></span>            &lt;/manifest&gt;</p><p>        &lt;/jar&gt;</p><p>    &lt;/target&gt;</p><p>    &lt;target <span style="color:#bababa;">name</span><span style="color:#6a8759;">=&quot;all&quot; </span><span style="color:#bababa;">description</span><span style="color:#6a8759;">=&quot;Build&quot; </span><span style="color:#bababa;">depends</span><span style="color:#6a8759;">=&quot;make.jar&quot;</span>&gt;</p><p>        &lt;echo&gt;I&#39;m Building&lt;/echo&gt;</p><p>    &lt;/target&gt;</p><p>    &lt;target <span style="color:#bababa;">name</span><span style="color:#6a8759;">=&quot;run&quot;</span>&gt;</p><p>        &lt;java <span style="color:#bababa;">classname</span><span style="color:#6a8759;">=&quot;MainProjectAssembling&quot; </span><span style="color:#bababa;">classpath</span><span style="color:#6a8759;">=&quot;build/class&quot;</span>/&gt;</p><p>    &lt;/target&gt;</p><p>    &lt;target <span style="color:#bababa;">name</span><span style="color:#6a8759;">=&quot;clean&quot; </span><span style="color:#bababa;">description</span><span style="color:#6a8759;">=&quot;Clean up&quot;</span>&gt;</p><p>        &lt;echo&gt;I&#39;m cleaning&lt;/echo&gt;</p><p>        &lt;delete <span style="color:#bababa;">dir</span><span style="color:#6a8759;">=&quot;build&quot;</span>/&gt;</p><p>    &lt;/target&gt;</p><p>&lt;/project&gt;</p><p>========================</p><p></p><p></p><p>Из командной строки в папке “ant” запускаем:</p><p>ant clean // очистка</p><p>ant // выполняется задача по умолчанию <span style="color:#bababa;">default</span><span style="color:#6a8759;">=&quot;all&quot;</span> с зависимостями (<span style="color:#bababa;">depends</span>): <span style="color:#6a8759;">&quot;make.dirs&quot;</span>, <span style="color:#6a8759;">&quot;compile&quot;</span>, <span style="color:#6a8759;">&quot;make.jar&quot;</span>, <span style="color:#6a8759;">&quot;all&quot;</span></p><p>ant run // запускается программа “MainProjectAssembling”</p><p>ant clean run</p><p></p><p>--------------------------------------------------------------------------------------------</p><p></p><p>==== build.xml ====</p><p>&lt;project name=&quot;java-build-tools&quot; &gt;      - имя проекта</p><p>    &lt;property name=&quot;src.dir&quot; value=&quot;src&quot;/&gt;      </p><p>    &lt;property name=&quot;build.dir&quot; value=&quot;build&quot;/&gt;      - сюда билдится проект</p><p>    &lt;property name=&quot;classes.dir&quot; value=&quot;${build.dir}/classes&quot;/&gt;     - сюда классы билдятся</p><p>    &lt;property name=&quot;jar.dir&quot; value=&quot;${build.dir}/jar&quot;/&gt;     - сюда заливается jar</p><p>    &lt;property name=&quot;jar.file&quot; value=&quot;${jar.dir}/${ant.project.name}.jar&quot;/&gt;      - файлы с jar</p><p>    &lt;property name=&quot;lib.dir&quot; value=&quot;lib&quot; /&gt;     - папка, где хранятся библиотеки, т.к. Ant не умеет подтягивать по умолчанию библиотеки</p><p>    &lt;property name=&quot;main-class&quot; value=&quot;JavaHelloWorld&quot;/&gt;        - чтобы генерировать запускаемый jar</p><p></p><p>    &lt;path id=&quot;lib.path.id&quot;&gt;</p><p>        &lt;fileset dir=&quot;${lib.dir}&quot; /&gt;</p><p>    &lt;/path&gt;</p><p></p><p>    &lt;target name=&quot;clean&quot;&gt;</p><p>        &lt;delete dir=&quot;${build.dir}&quot;/&gt;</p><p>    &lt;/target&gt;</p><p></p><p>    &lt;target name=&quot;compile&quot;&gt;</p><p>        &lt;mkdir dir=&quot;${classes.dir}&quot;/&gt;</p><p>        &lt;javac srcdir=&quot;${src.dir}&quot; destdir=&quot;${classes.dir}&quot; classpathref=&quot;lib.path.id&quot;/&gt;        - srcdir - откуда брать</p><p>    &lt;/target&gt;</p><p></p><p>    &lt;target name=&quot;package&quot; depends=&quot;compile&quot;&gt;</p><p>        &lt;mkdir dir=&quot;${jar.dir}&quot;/&gt;</p><p>        &lt;jar destfile=&quot;${jar.file}&quot; basedir=&quot;${classes.dir}&quot;&gt;       - создание jar файла</p><p>            &lt;manifest&gt;</p><p>                &lt;attribute name=&quot;Main-Class&quot; value=&quot;${main-class}&quot;/&gt;</p><p>            &lt;/manifest&gt;</p><p>        &lt;/jar&gt;</p><p>    &lt;/target&gt;</p><p>&lt;/project&gt;</p><p>========================</p><p></p><p></p><p></p><p></p><p></p><p></p><p>       </p></div>
</body>
</html>
