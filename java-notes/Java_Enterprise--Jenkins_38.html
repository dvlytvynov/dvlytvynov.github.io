<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Jenkins</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles4.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>Jenkins</h1><br/><p><a href="https://www.jenkins.io/">https://www.jenkins.io/</a></p><p></p><p>Jenkins - самый распространенный open-source инструмент для CI/CD</p><p>Позволяет:</p><p>- монитроить репозиторий</p><p>- удаленно собирать проекты</p><p>- работать автоматически с <a href="Java_Enterprise--SonarQube_40.html">SonarQube</a></p><p>- проверять (делать какую-то автоматизацию)</p><p>- мониторить (периодически) доступность какого-то сервера, отправлять на почту сообщения</p><p>- автоматизировать любую рутинную работу и хранить по этой работе историю</p><p></p><p>Установка:</p><p>- Скачать: <a href="https://get.jenkins.io/war/2.362/jenkins.war">https://get.jenkins.io/war/2.362/jenkins.war</a></p><p>- В папке, куда скачан Jenkins, запустить из командной строки:</p><p>   → java -jar jenkins.war --httpPort=1222   // --httpPort=1222 если нужно использовать порт отличный от порта по умолчанию. Пароль по умолчанию будет виден в командной строке при запуске Jenkins</p><p>   → Jenkins будет распакован в эту папку <a href="file://C:/Users/Dmk/.jenkins">C:\Users\&lt;Имя пользователя&gt;\.jenkins</a></p><p>   → Скопировать временный пароль</p><p>      ⇒ <div class="codebox"><pre>*************************************************************<br />*************************************************************<br />*************************************************************<br /><br />Jenkins initial setup is required. An admin user has been cre<br /> generated.<br />Please use the following password to proceed to installation:<br /><br />942a9feb54ea4ae9a559673f61fd0500<br /><br />This may also be found at: C:\Users\Dmk\.jenkins\secrets\init<br /><br />*************************************************************<br />*************************************************************<br />*************************************************************</pre></div></p><p>   → В браузере вводим: <a href="http://localhost:1222">http://localhost:1222</a></p><p>   → Вводим скопированный временный пароль</p><p>   → Install suggested plugins</p><p>   → Создаем пользователя:</p><p>      ⇒ Имя пользователя: admin</p><p>      ⇒ Пароль: admin</p><p>      ⇒ Ф.И.О.: Admin</p><p>      ⇒ Адрес электронной почты: admin@admin.com //не обязательно</p><p>- Основы Jenkins - это job-ы (работа); job-ы управляют какими-то процессами</p><p>- Jenkins затягивает проект (вкачка src - step 0) из репозитория в папку <a href="file://C:/Users/Dmk/.jenkins/workspace">C:\Users\&lt;Имя пользователя&gt;\.jenkins\workspace</a></p><p>- Настройки <a href="file://C:/Users/Dmk/.jenkins/workspace">C:\Users\&lt;Имя пользователя&gt;\.jenkins\jobs</a></p><p>- К Jenkins можно приконнектить другие компьютеры, на которых он будет билдить</p><p>- &lt;Имя job&gt;/Configuration/Build steps/Выполнить команду Windows(Exetute windows batch command): mvn clean install (Execute shell - если Линукс или Мак)</p><p></p><p>- Создать файл “Jenkinsfile” в корне проекта (с помощью этого файла автоматически конфигурируется jobs на стороне Jenkins):</p><p>   → <div class="codebox"><pre>pipeline {<br />    agent any;<br />    stages {<br />        stage(&quot;Build&quot;) {<br />            steps {<br />                echo &#39;Building...&#39;<br />                bat &quot;&quot;&quot;<br />                    mvn clean install -DskipTests=true<br />                &quot;&quot;&quot;<br />            }<br />        }<br />        stage(&quot;Test&quot;) {<br />            steps {<br />                echo &#39;Testing...&#39;<br />                bat &quot;&quot;&quot;<br />                    mvn test -Dsurefire.usefile=false<br />                &quot;&quot;&quot;<br />            }<br />        }<br />    }<br />}<br /></pre></div></p><p></p><p>- Создаем новый job в Jenkins: new item/Multibranch Pipeline (на каждый branch создает свой job)</p><p>   → ввести Display Name</p><p>   → Branch Sources: Git/Project Repository - адрес репозитория на GitHub</p><p>   → Mode = by Jenkinsfile; Script Path = Jenkinsfile</p><p>   → Save</p><p>   → (Можно установить периодическое сканирование: Scan Multibranch Pipeline Triggers)</p><p></p><p>Рекомендуется хранить пароли или в переменных окружения или в дженкинсе.</p><p></p><p></p></div>
</body>
</html>
